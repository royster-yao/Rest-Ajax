<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
    <script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>
  </head>
  <body>
    <button id="btn1">按钮1</button>
    <button id="btn2">按钮2</button>
    <script>
      document.getElementById("btn1").onclick = () => {
        // 直接调用axios发送请求
        // axios(config)
        axios({
          // baseURL 指定服务器的根目录(路径的前缀)
          baseURL: "http://localhost:3000",

          // 请求地址
          url: "/test",

          // 请求方法,默认是GET
          method: "GET",

          // 指定请求头
          // Headers: {
          //   "Content-type": "application/json",
          // },

          // 请求体
          data: {
            name: "唐僧",
            age: 18,
            gender: "男",
            address: "女儿国",
          },

          // params 用来指定路径中的查询字符串
          // 等于发送的是http://localhost:3000/students?id=1
          params: {
            id: 1,
            name: "swk",
          },

          // timeout 过期时间
          timeout: 0,

          // 用来终止请求
          // signal

          // transformRequest可以用来处理请求数据(data)
          // 它需要一个数组作为参数，数组可以接收多个函数，请求发送时多个函数会按照顺序执行
          // 函数在执行时，会接收到两个参数data和headers
          // 对发送的data进行任意的转换处理
          // transformRequest: [
          //   (data, headers) => {
          //     // 可以在函数中对data和headers进行修改
          //     data.name = "猪八戒"
          //     headers["Content-type"] = "application/json"
          //     return data
          //   },
          //   (data, headers) => {
          //     // 最后一函数必须返回一个字符串，才能使得数据有效
          //     return JSON.stringify(data)
          //   },
          // ],
        })
          .then((result) => {
            // result是axios封装过的
            console.log(result.data)
          })
          .catch((err) => {
            console.log("出错了！", err)
          })
      }
    </script>
  </body>
</html>
